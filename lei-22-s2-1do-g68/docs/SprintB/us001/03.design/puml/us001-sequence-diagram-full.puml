@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Unregistered User" as ADM
participant ":CreateGuestUI" as UI
participant ":CreateGuestController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "PropertyRepository:\PropertyRepository" as PropertyRepository




activate ADM

        ADM -> UI : asks to create a new task

        activate UI


            UI -> CTRL** : create

            UI -> CTRL : getListProperties
            activate CTRL


group Get Property List
                CTRL -> RepositorySingleton : getInstance()
                activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                deactivate RepositorySingleton

                CTRL -> PLAT : getPropertyRepository()
                activate PLAT

                    PLAT --> CTRL: PropertyRepository
                deactivate PLAT

    CTRL -> PropertyRepository : getPropertyList()
             activate PropertyRepository

                 PropertyRepository --> CTRL : PropertyList
             deactivate PropertyRepository

end
                CTRL --> UI : ListProperty
            deactivate CTRL

            UI --> ADM : Shows List of Properties
        deactivate UI
alt User filters properties
    ADM -> UI : Selects wanted filters for properties
    activate UI
        UI -> CTRL : getFilteredProperties
        ref over CTRL
            Get Filtered Properties

        end ref
    CTRL --> UI : FilteredProperties
    end alt
        UI --> ADM : Display list of properties by selected filter
        deactivate UI

alt User sorts properties
    ADM -> UI : Selects wanted sort criteria for properties
    activate UI
    UI -> CTRL : getSortProperties
            ref over CTRL
                Get Sorted Properties

            end ref
        CTRL --> UI : SortedProperties
    end alt
        UI --> ADM : Display list of properties by selected sort criteria
    deactivate UI



@enduml